<div th:fragment="modalContent">
    <form id="approveForm">
        <input type="hidden" name="questionNo" th:value="${quiz.questionNo}" />
        <!-- 문제유형 -->
        <div class="mb-3">
            <label class="form-label">문제유형</label> <select class="form-select"
                                                           name="typeCd" disabled>
            <option th:each="type : ${typeCdList}" th:value="${type.code}"
                    th:text="${type.name}" th:selected="${type.code == quiz.typeCd}">문제유형</option>
        </select> <input type="hidden" name="typeCd" th:value="${quiz.typeCd}" />
        </div>

        <!-- 문제 -->
        <div class="mb-3">
            <label class="form-label">문제</label>
            <textarea class="form-control" name="content" rows="4" required
                      th:text="${quiz.content}"></textarea>
        </div>

        <!-- 정답 -->
        <div class="mb-3">
            <label class="form-label">정답</label>

            <!-- 단답형일 경우 -->
            <div th:if="${quiz.typeCd == '1'}">
 <textarea class="form-control" name="answer" rows="4" required
           th:text="${quiz.answer}"></textarea>
            </div>



            <!-- OX형일 경우 -->
            <div th:if="${quiz.typeCd == '2'}">
                <select class="form-select" name="answer" required>
                    <option value="O" th:selected="${quiz.answer == 'O'}">O</option>
                    <option value="X" th:selected="${quiz.answer == 'X'}">X</option>
                </select>
            </div>

            <!-- 객관식일 경우 -->
            <div th:if="${quiz.typeCd == '3'}">
                <div id="choices-wrapper">
                    <div class="input-group mb-2" th:each="c, stat : ${quiz.choices}">
                        <span class="input-group-text">[[${c.choiceNo}]]</span>
                        <!-- 서버 바인딩: 인덱스로 안전하게 -->
                        <input type="hidden" th:name="|choices[${stat.index}].choiceNo|"
                               th:value="${c.choiceNo}">
                        <input type="text"
                               class="form-control" th:name="|choices[${stat.index}].content|"
                               th:placeholder="|보기 ${stat.count} 입력|" th:value="${c.content}">

                        <div class="input-group-text">
                            <input type="radio" name="answer" th:value="${c.choiceNo}"
                                   th:checked="${quiz.answer == c.choiceNo.toString()}" required> 정답
                        </div>
                        <button type="button" class="btn btn-outline-danger btn-sm ms-2 remove-choice-btn">삭제</button>
                    </div>
                </div>
                <input type="hidden" id="maxChoiceNo" th:value="${#lists.size(quiz.choices)}">
                <button type="button" class="main-btn primary-btn btn-hover"
                        id="add-choice-btn">선택지 추가</button>
            </div>
        </div>
        <!-- 해설 -->
        <div class="mb-3">
            <label cla ss="form-label">해설</label>
            <textarea class="form-control" name="description" rows="4"
                      th:text="${quiz.description}"></textarea>
        </div>

        <div class="row mb-3">
            <!-- 포인트 -->
            <div class="col-md-4">
                <label class="form-label">포인트</label> <select class="form-select"
                                                              id="points" name="points" required>
                <option th:each="item : ${pointList}" th:value="${item.value}"
                        th:text="${item.value}" th:selected="${item.value == quiz.points}">점수</option>
            </select>
            </div>

            <!-- 카테고리 -->
            <div class="col-md-4">
                <label class="form-label">카테고리</label> <select class="form-select"
                                                               id="categoryName" name="categoryName" required>
                <option th:each="item : ${categoryList}" th:value="${item.name}"
                        th:text="${item.name}"
                        th:selected="${item.name == quiz.categoryName}">카테고리</option>
            </select>
            </div>

            <!-- 난이도 -->
            <div class="col-md-4">
                <label class="form-label">난이도</label> <select class="form-select"
                                                              id="levelCd" name="levelCd" required>
                <option th:each="item : ${levelList}" th:value="${item.code}"
                        th:text="${item.name}" th:selected="${item.code == quiz.levelCd}">난이도</option>
            </select>
            </div>
        </div>
        <!-- 작성자 & 작성일자 -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">작성자</label> <input type="text"
                                                             class="form-control" name="fstCrtUsid"
                                                             th:value="${quiz.fstCrtUsid}" readonly />
            </div>

            <div class="col-md-4">
                <label class="form-label">작성일자</label> <input type="text"
                                                              class="form-control"
                                                              th:value="${#temporals.format(quiz.fstCrtDtti, 'yyyy-MM-dd HH:mm')}"
                                                              readonly />
            </div>
        </div>
        <!-- 승인 버튼 -->
        <div class="text-end">
            <button type="button" id="approveBtn"
                    class="btn btn-success w-100 mt-2">승인</button>
        </div>
    </form>

    <hr />
    <form id="rejectForm">
        <input type="hidden" name="questionNo" th:value="${quiz.questionNo}" />

        <div class="mb-3">
            <label class="form-label">반려 사유</label>
            <textarea th:text="${quiz.rejectCn}" class="form-control"
                      name="rejectCn" rows="2" placeholder="반려 사유를 입력하세요" required></textarea>
        </div>

        <div class="text-end">
            <button type="button" id="rejectBtn"
                    class="btn btn-danger w-100 mt-2">반려</button>
        </div>
    </form>
</div>

<div th:fragment="rejectedContent">
    <input type="hidden" name="questionNo" th:value="${quiz.questionNo}" />


    <!-- 문제유형 -->
    <div class="mb-3">
        <label class="form-label">문제유형</label> <input class="form-control"
                                                      type="text" name="typeCd" th:value="${quiz.typeName}" readonly />
    </div>

    <!-- 문제 -->
    <div class="mb-3">
        <label class="form-label">문제</label>
        <textarea class="form-control" name="content" rows="4"
                  th:text="${quiz.content}" readonly></textarea>
    </div>

    <!-- 정답 -->
    <div class="mb-3">
        <label class="form-label">정답</label>

        <!-- 단답형일 경우 -->
        <div th:if="${quiz.typeCd == '1'}">
 <textarea class="form-control" name="answer" rows="4"
           th:text="${quiz.answer}" readonly></textarea>
        </div>

        <!-- OX형일 경우 -->
        <div th:if="${quiz.typeCd == '2'}">
            <input class="form-control" type="text" name="answer"
                   th:value="${quiz.answer}" readonly />
        </div>

        <!-- 객관식일 경우 -->
        <div th:if="${quiz.typeCd == '3'}">
            <div id="choices-wrapper">
                <div class="input-group mb-2" th:each="c, stat : ${quiz.choices}">
                    <span class="input-group-text">[[${c.choiceNo}]]</span>
                    <!-- 서버 바인딩: 인덱스로 안전하게 -->
                    <input type="hidden" th:name="|choices[${stat.index}].choiceNo|"
                           th:value="${c.choiceNo}">
                    <input type="text"
                           class="form-control" th:name="|choices[${stat.index}].content|"
                           th:placeholder="|보기 ${stat.count} 입력|" th:value="${c.content}" readonly>

                    <div class="input-group-text">
                        <input type="radio" name="answer" th:value="${c.choiceNo}"
                               th:checked="${quiz.answer == c.choiceNo.toString()}" readonly> 정답
                    </div>
                </div>
            </div>
            <input type="hidden" id="maxChoiceNo" th:value="${#lists.size(quiz.choices)}">
        </div>
    </div>
    <!-- 해설 -->
    <div class="mb-3">
        <label cla ss="form-label">해설</label>
        <textarea class="form-control" name="description" rows="4"
                  th:text="${quiz.description}" readonly></textarea>
    </div>

    <div class="row mb-3">
        <!-- 포인트 -->
        <div class="col-md-4">
            <label class="form-label">포인트</label> <input class="form-control"
                                                         type="text" name="points" th:value="${quiz.points}" readonly />
        </div>

        <!-- 카테고리 -->
        <div class="col-md-4">
            <label class="form-label">카테고리</label> <input class="form-control"
                                                          type="text" name="categoryName" th:value="${quiz.categoryName}"
                                                          readonly />

        </div>

        <!-- 난이도 -->
        <div class="col-md-4">
            <label class="form-label">난이도</label> <input class="form-control"
                                                         type="text" name="levelCd" th:value="${quiz.levelName}" readonly />
        </div>
    </div>
    <!-- 작성자 & 작성일자 -->
    <div class="row mb-3">
        <div class="col-md-4">
            <label class="form-label">작성자</label> <input type="text"
                                                         class="form-control" th:value="${quiz.fstCrtUsid}" readonly />
        </div>

        <div class="col-md-4">
            <label class="form-label">작성일자</label> <input type="text"
                                                          class="form-control"
                                                          th:value="${#temporals.format(quiz.fstCrtDtti, 'yyyy-MM-dd HH:mm')}"
                                                          readonly />
        </div>
    </div>

    <div class="mb-3">
        <label class="form-label">반려 사유</label>
        <textarea th:text="${quiz.rejectCn}" class="form-control"
                  name="rejectCn" rows="2" placeholder="반려 사유를 입력하세요" required></textarea>
    </div>

</div>

<div th:fragment="approvedContent">
    <form id="updateForm">
        <input type="hidden" name="questionNo" th:value="${quiz.questionNo}" />
        <!-- 문제유형 -->
        <div class="mb-3">
            <label class="form-label">문제유형</label> <select class="form-select"
                                                           name="typeCd" disabled>
            <option th:each="type : ${typeCdList}" th:value="${type.code}"
                    th:text="${type.name}" th:selected="${type.code == quiz.typeCd}">문제유형</option>
        </select> <input type="hidden" name="typeCd" th:value="${quiz.typeCd}" />
        </div>

        <!-- 문제 -->
        <div class="mb-3">
            <label class="form-label">문제</label>
            <textarea class="form-control" name="content" rows="4" required
                      th:text="${quiz.content}"></textarea>
        </div>

        <!-- 정답 -->
        <div class="mb-3">
            <label class="form-label">정답</label>

            <!-- 단답형일 경우 -->
            <div th:if="${quiz.typeCd == '1'}">
 <textarea class="form-control" name="answer" rows="4" required
           th:text="${quiz.answer}"></textarea>
            </div>

            <!-- OX형일 경우 -->
            <div th:if="${quiz.typeCd == '2'}">
                <select class="form-select" name="answer" required>
                    <option value="O" th:selected="${quiz.answer == 'O'}">O</option>
                    <option value="X" th:selected="${quiz.answer == 'X'}">X</option>
                </select>
            </div>

            <!-- 객관식일 경우 -->
            <div th:if="${quiz.typeCd == '3'}">
                <div id="choices-wrapper">
                    <div class="input-group mb-2" th:each="c, stat : ${quiz.choices}">
                        <span class="input-group-text">[[${c.choiceNo}]]</span>
                        <!-- 서버 바인딩: 인덱스로 안전하게 -->
                        <input type="hidden" th:name="|choices[${stat.index}].choiceNo|"
                               th:value="${c.choiceNo}">
                        <input type="text"
                               class="form-control" th:name="|choices[${stat.index}].content|"
                               th:placeholder="|보기 ${stat.count} 입력|" th:value="${c.content}">

                        <div class="input-group-text">
                            <input type="radio" name="answer" th:value="${c.choiceNo}"
                                   th:checked="${quiz.answer == c.choiceNo.toString()}" required> 정답
                        </div>
                        <button type="button" class="btn btn-outline-danger btn-sm ms-2 remove-choice-btn">삭제</button>
                    </div>
                </div>
                <input type="hidden" id="maxChoiceNo" th:value="${#lists.size(quiz.choices)}">
                <button type="button" class="main-btn primary-btn btn-hover"
                        id="add-choice-btn">선택지 추가</button>
            </div>
        </div>
        <!-- 해설 -->
        <div class="mb-3">
            <label cla ss="form-label">해설</label>
            <textarea class="form-control" name="description" rows="4"
                      th:text="${quiz.description}"></textarea>
        </div>

        <div class="row mb-3">
            <!-- 포인트 -->
            <div class="col-md-4">
                <label class="form-label">포인트</label> <select class="form-select"
                                                              id="points" name="points" required>
                <option th:each="item : ${pointList}" th:value="${item.value}"
                        th:text="${item.value}" th:selected="${item.value == quiz.points}">점수</option>
            </select>
            </div>

            <!-- 카테고리 -->
            <div class="col-md-4">
                <label class="form-label">카테고리</label> <select class="form-select"
                                                               id="categoryName" name="categoryName" required>
                <option th:each="item : ${categoryList}" th:value="${item.name}"
                        th:text="${item.name}"
                        th:selected="${item.name == quiz.categoryName}">카테고리</option>
            </select>
            </div>

            <!-- 난이도 -->
            <div class="col-md-4">
                <label class="form-label">난이도</label> <select class="form-select"
                                                              id="levelCd" name="levelCd" required>
                <option th:each="item : ${levelList}" th:value="${item.code}"
                        th:text="${item.name}" th:selected="${item.code == quiz.levelCd}">난이도</option>
            </select>
            </div>
        </div>
        <!-- 작성자 & 작성일자 -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">작성자</label> <input type="text"
                                                             class="form-control" name="fstCrtUsid"
                                                             th:value="${quiz.fstCrtUsid}" readonly />
            </div>

            <div class="col-md-4">
                <label class="form-label">작성일자</label> <input type="text"
                                                              class="form-control"
                                                              th:value="${#temporals.format(quiz.fstCrtDtti, 'yyyy-MM-dd HH:mm')}"
                                                              readonly />
            </div>
        </div>
        <!-- 승인 버튼 -->
        <div class="text-end">
            <div class="row">
                <button type="button" id="updateBtn"
                        class="btn btn-success w-50 mt-2">수정</button>
                <button type="button" id="removeBtn"
                        class="btn btn-danger w-50 mt-2">삭제</button>
            </div>
        </div>
    </form>


</div>